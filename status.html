<!DOCTYPE html>
<html class="theme-dark glass-subtle animations-enhanced shadows-deep">
  <!--
  Title: myTheme
  Author: HPY
  Credits: MikroTik, Mikhmon, Deviantart, Github
  Link: https://github.com/hpy-git/myTheme
  -->
<head>
<title id="title"></title>
$(if refresh-timeout)
<meta http-equiv="refresh" content="$(refresh-timeout-secs)">
$(endif)
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#5b7cfa" />
<meta http-equiv="Cache-Control" content="no-cache">
<link rel="icon" type="image/x-icon" href="favicon.ico">
<link rel="stylesheet" href="css/horizon.css">
<script language="javaScript">

$(if advert-pending == 'yes')
    var popup = '';
    function focusAdvert() {
	if (window.focus) popup.focus();
    }
    function openAdvert() {
	popup = open('$(link-advert)', 'hotspot_advert', '');
	setTimeout("focusAdvert()", 1000);
    }
$(endif)
    function openLogout() {
	if (window.name != 'hotspot_status') return true;
        open('$(link-logout)', 'hotspot_logout', 'toolbar=0,location=0,directories=0,status=0,menubars=0,resizable=1,width=280,height=250');
	window.close();
	return false;
    }

</script>
</head>
<body $(if advert-pending == 'yes')	onLoad="openAdvert()" $(endif) class="wallpaper-active">
<div class="wallpaper-bg-image"></div>
<!-- Sparkle Container -->
<div class="sparkle-container" id="sparkleContainer">
  <div class="float-sparkle"></div>
  <div class="float-sparkle"></div>
  <div class="float-sparkle"></div>
  <div class="float-sparkle"></div>
  <div class="float-sparkle"></div>
  <div class="float-sparkle"></div>
  <div class="float-sparkle"></div>
  <div class="float-sparkle"></div>
  <div class="float-sparkle"></div>
  <div class="float-sparkle"></div>
</div>
<div class="wallpaper-content">
  <div style="max-width: 700px; margin: 0 auto; padding: var(--space-3);">
  
  <!-- Welcome Section - Premium Glass Container -->
$(if login-by == 'trial')
  <div class="container" style="max-width: 100%; margin-bottom: var(--space-4); text-align: center; padding: var(--space-4);">
    <i style="font-size: 64px; color: #5b7cfa; margin-bottom: var(--space-2); display: block;" class="icon icon-user-circle-o">&#xf2be;</i>
    <h2 style="color: var(--text-0); margin: 0 0 var(--space-1) 0; font-size: 24px;">Welcome</h2>
    <p style="color: var(--text-1); margin: 0; font-size: 16px; font-weight: 500;">Trial User</p>
  </div>
$(elif login-by != 'mac')
  <div class="container" style="max-width: 100%; margin-bottom: var(--space-4); text-align: center; padding: var(--space-4);">
    <i style="font-size: 64px; color: #5b7cfa; margin-bottom: var(--space-2); display: block;" class="icon icon-user-circle-o">&#xf2be;</i>
    <h2 style="color: var(--text-0); margin: 0 0 var(--space-1) 0; font-size: 24px;">Welcome</h2>
    <p id="user" style="color: var(--text-1); margin: 0; font-size: 18px; font-weight: 600;">$(username)</p>
  </div>
$(endif)

  <form action="$(link-logout)" name="logout" onSubmit="return openLogout()">
  
  <!-- Connection Info Section -->
  <div style="margin-bottom: var(--space-3);">
    <h3 style="color: var(--text-0); font-size: 14px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; margin: 0 0 var(--space-2) 0; opacity: 0.8;">Connection Info</h3>
    
    <!-- Network Details - 2 Column Grid -->
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-2); margin-bottom: var(--space-2);">
      <!-- IP Address Card -->
      <div class="container" style="padding: var(--space-3); text-align: center;">
        <i class="icon icon-sitemap" style="font-size: 24px; color: #5b7cfa; display: block; margin-bottom: var(--space-1);">&#xf0e8;</i>
        <p style="color: var(--text-2); font-size: 12px; margin: 0 0 var(--space-1) 0; text-transform: uppercase; letter-spacing: 0.5px;">IP Address</p>
        <p style="color: var(--text-0); font-size: 14px; font-weight: 600; margin: 0; word-break: break-all;">$(ip)</p>
      </div>
      
      <!-- MAC Address Card -->
      <div class="container" style="padding: var(--space-3); text-align: center;">
        <i class="icon icon-barcode" style="font-size: 24px; color: #8b5cf6; display: block; margin-bottom: var(--space-1);">&#xe80a;</i>
        <p style="color: var(--text-2); font-size: 12px; margin: 0 0 var(--space-1) 0; text-transform: uppercase; letter-spacing: 0.5px;">MAC Address</p>
        <p style="color: var(--text-0); font-size: 13px; font-weight: 600; margin: 0; font-family: monospace; word-break: break-all;">$(mac)</p>
      </div>
    </div>
  </div>

  <!-- Data Usage Section -->
  <div style="margin-bottom: var(--space-3);">
    <h3 style="color: var(--text-0); font-size: 14px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; margin: 0 0 var(--space-2) 0; opacity: 0.8;">Data Usage</h3>
    
    <!-- Upload & Download - 2 Column Grid -->
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-2); margin-bottom: var(--space-2);">
      <!-- Upload Card -->
      <div class="container" style="padding: var(--space-3); text-align: center;">
        <i class="icon icon-upload" style="font-size: 24px; color: #10b981; display: block; margin-bottom: var(--space-1);">&#xe808;</i>
        <p style="color: var(--text-2); font-size: 12px; margin: 0 0 var(--space-1) 0; text-transform: uppercase; letter-spacing: 0.5px;">Upload</p>
        <p style="color: var(--text-0); font-size: 16px; font-weight: 600; margin: 0;">$(bytes-in-nice)</p>
      </div>
      
      <!-- Download Card -->
      <div class="container" style="padding: var(--space-3); text-align: center;">
        <i class="icon icon-download" style="font-size: 24px; color: #3b82f6; display: block; margin-bottom: var(--space-1);">&#xe809;</i>
        <p style="color: var(--text-2); font-size: 12px; margin: 0 0 var(--space-1) 0; text-transform: uppercase; letter-spacing: 0.5px;">Download</p>
        <p style="color: var(--text-0); font-size: 16px; font-weight: 600; margin: 0;">$(bytes-out-nice)</p>
      </div>
    </div>
  </div>

  <!-- Session Info Section -->
  <div style="margin-bottom: var(--space-3);">
    <h3 style="color: var(--text-0); font-size: 14px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; margin: 0 0 var(--space-2) 0; opacity: 0.8;">Session Info</h3>
    
    <!-- Connected Time -->
    <div class="container" style="padding: var(--space-3); margin-bottom: var(--space-2);">
      <div style="display: flex; align-items: center; justify-content: space-between;">
        <div style="display: flex; align-items: center; gap: var(--space-2);">
          <i class="icon icon-exchange" style="font-size: 20px; color: #5b7cfa;">&#xf0ec;</i>
          <span style="color: var(--text-2); font-size: 13px; text-transform: uppercase; letter-spacing: 0.5px;">Connected</span>
        </div>
        <span style="color: var(--text-0); font-size: 14px; font-weight: 600;">$(uptime)</span>
      </div>
    </div>

$(if remain-bytes-total)
    <!-- Bytes Left -->
    <div class="container" style="padding: var(--space-3); margin-bottom: var(--space-2);">
      <div style="display: flex; align-items: center; justify-content: space-between;">
        <div style="display: flex; align-items: center; gap: var(--space-2);">
          <i class="icon icon-hourglass-2" style="font-size: 20px; color: #f59e0b;">&#xf252;</i>
          <span style="color: var(--text-2); font-size: 13px; text-transform: uppercase; letter-spacing: 0.5px;">Bytes Left</span>
        </div>
        <span style="color: var(--text-0); font-size: 14px; font-weight: 600;">$(remain-bytes-total-nice)</span>
      </div>
    </div>
$(endif)

$(if session-time-left)
    <!-- Time Left -->
    <div class="container" style="padding: var(--space-3); margin-bottom: var(--space-2);">
      <div style="display: flex; align-items: center; justify-content: space-between;">
        <div style="display: flex; align-items: center; gap: var(--space-2);">
          <i class="icon icon-clock" style="font-size: 20px; color: #ef4444;">&#xe805;</i>
          <span style="color: var(--text-2); font-size: 13px; text-transform: uppercase; letter-spacing: 0.5px;">Time Left</span>
        </div>
        <span style="color: var(--text-0); font-size: 14px; font-weight: 600;">$(session-time-left)</span>
      </div>
    </div>
$(endif)
  </div>

$(if blocked == 'yes')
  <!-- Status Alert -->
  <div class="container" style="padding: var(--space-3); margin-bottom: var(--space-3); border-left: 4px solid #FF8080; background: linear-gradient(135deg, rgba(255,128,128,0.15) 0%, rgba(255,128,128,0.05) 100%);">
    <div style="display: flex; align-items: center; justify-content: space-between;">
      <div style="display: flex; align-items: center; gap: var(--space-2);">
        <i class="icon icon-check" style="font-size: 20px; color: #FF8080;">&#xe807;</i>
        <span style="color: var(--text-2); font-size: 13px; text-transform: uppercase; letter-spacing: 0.5px;">Status</span>
      </div>
      <a href="$(link-advert)" target="hotspot_advert" style="color: #FF8080; font-size: 13px; font-weight: 600; text-decoration: none;">advertisement required</a>
    </div>
  </div>
$(elif refresh-timeout)
  <!-- Refresh Status -->
  <div class="container" style="padding: var(--space-3); margin-bottom: var(--space-3); border-left: 4px solid #3b82f6;">
    <div style="display: flex; align-items: center; justify-content: space-between;">
      <div style="display: flex; align-items: center; gap: var(--space-2);">
        <i class="icon icon-arrows-cw" style="font-size: 20px; color: #3b82f6;">&#xe800;</i>
        <span style="color: var(--text-2); font-size: 13px; text-transform: uppercase; letter-spacing: 0.5px;">Refresh</span>
      </div>
      <span style="color: var(--text-0); font-size: 14px; font-weight: 600;">$(refresh-timeout)</span>
    </div>
  </div>
$(endif)

$(if login-by-mac != 'yes')
  <!-- Logout Button -->
  <button class="button2" type="submit" style="width: 100%; margin-top: var(--space-4); height: 52px; font-size: 16px;"><i class="icon icon-logout">&#xe804;</i> Logout</button>
$(endif)
  </form>
  </div>
</div>
</div>
<script type="text/javascript">
    //document.getElementById('title').innerHTML = window.location.hostname + " > status";
    var titleElement = document.getElementById('title');
    if (titleElement) {
        titleElement.innerHTML = "$(hostname) &gt; status";
    }

  // ----- Sparkle effect on click -----
  function createSparkle(x, y) {
    const sparkle = document.createElement('div');
    sparkle.className = 'sparkle';
    sparkle.style.left = x + 'px';
    sparkle.style.top = y + 'px';
    sparkle.style.color = ['âœ¨', 'ðŸ’«', 'â­'][Math.floor(Math.random() * 3)];
    document.body.appendChild(sparkle);
    setTimeout(() => sparkle.remove(), 2000);
  }

  // Add sparkles on button/link clicks
  document.querySelectorAll('button, a').forEach(el => {
    el.addEventListener('click', (e) => {
      createSparkle(e.clientX, e.clientY);
      createSparkle(e.clientX + 20, e.clientY - 20);
      createSparkle(e.clientX - 20, e.clientY - 20);
    });
  });

  // Add sparkles on random intervals for ambient effect
  setInterval(() => {
    if (Math.random() > 0.7) {
      const x = Math.random() * window.innerWidth;
      const y = Math.random() * window.innerHeight;
      createSparkle(x, y);
    }
  }, 1000);

//get vaidity
    var usr = document.getElementById('user').innerHTML
    var url = "http://10.0.0.1/status/status.php?name="; // http://ip-server-mikhmon/mikhmonv2/status/status.php?name=
    var SessionName = "cloudguesthotspot"
    var getvalid = url+usr+"&session="+SessionName
    document.getElementById('exp').src = getvalid;
        
</script>

<!-- Audio Files-->
<audio id="clickSound" src="audio/sfx/pop-reverb-423718.mp3" preload="auto" style="display: none;"></audio>
<audio id="bgAudio" src="audio/bgm/tlou-comp.mp3" preload="auto" loop autoplay style="display:none"></audio>

<script type="text/javascript" >
  // ----- Click sound handler -----
  const clickSound = document.getElementById('clickSound');
  document.querySelectorAll('button, a').forEach(el => {
    el.addEventListener('click', () => {
      if (clickSound) {
        clickSound.currentTime = 0; // Reset to start
        clickSound.play().catch(()=>{}); // Catch autoplay issues
      }
    });
  });

  // ----- Background music handler -----
  const bgAudio = document.getElementById('bgAudio');
  if (bgAudio) {
    bgAudio.volume = 0.25; // subtle background volume
    const tryPlayBG = () => {
      const p = bgAudio.play();
      if (p && typeof p.catch === 'function') {
        p.catch(() => {
          // Autoplay blocked, play on first user interaction
          const resume = () => {
            bgAudio.play().catch(()=>{});
            window.removeEventListener('pointerdown', resume, { once: true });
          };
          window.addEventListener('pointerdown', resume, { once: true });
        });
      }
    };

    if (document.readyState === 'complete' || document.readyState === 'interactive') {
      tryPlayBG();
    } else {
      document.addEventListener('DOMContentLoaded', tryPlayBG, { once: true });
    }
  }
</script>
</body>
</html>
